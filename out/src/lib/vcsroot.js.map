{"version":3,"sources":["../../../src/lib/vcsroot.js"],"names":["VcsRoot","baseUrl","name","password","_baseUrl","uri","options","_createRequestJson","args","request","projectLocator","projectName","projectId","properties","property","value","url","vcsName","vcsType","branch","push"],"mappings":";;;;;;;;;;AAAA;;;;;;;;;;;;;;IAEqBA,O;;;AAEnB;;;AAGA,mBAAaC,OAAb,EAAsBC,IAAtB,EAA4BC,QAA5B,EAAsC;AAAA;;AAAA,kHAC9BF,OAD8B,EACrBC,IADqB,EACfC,QADe;;AAEpC,UAAKC,QAAL,GAAmB,MAAKA,QAAxB;AAFoC;AAGrC;;AAED;;;;;;;;;4EAIWF,I;;;;;;8HACe,EAAEG,KAAQ,KAAKD,QAAb,aAA6BF,IAA/B,E;;;;;;;;;;;;;;;;;;;;AAG1B;;;;;;;;;;;;;8EAScI,O;;;;;;+HACa,EAAED,KAAK,KAAKD,QAAZ,E,EAAwB,KAAKG,kBAAL,CAAwBD,OAAxB,C;;;;;;;;;;;;;;;;;;;;;;8EAGrCJ,I;;;;;;iIACe,EAAEG,KAAQ,KAAKD,QAAb,aAA6BF,IAA/B,E;;;;;;;;;;;;;;;;;;;;;uCAGTM,I,EAAM;AACxB,UAAIC,UAAU;AACZP,cAAMM,KAAKN,IADC;AAEZQ,wBAAgBF,KAAKG,WAAL,aACUH,KAAKG,WADf,WAEQH,KAAKI,SAJjB;AAKZC,oBAAY;AACVC,oBAAU,CACR,EAAEZ,MAAM,KAAR,EAAea,OAAOP,KAAKQ,GAA3B,EADQ;AADA,SALA;AAUZC,iBAAST,KAAKU;AAVF,OAAd;;AAaA,UAAIV,KAAKW,MAAT,EAAiB;AACfV,gBAAQI,UAAR,CAAmBC,QAAnB,CAA4BM,IAA5B,CAAiC,EAAElB,MAAM,QAAR,EAAkBa,OAAOP,KAAKW,MAA9B,EAAjC;AACD;;AAED,aAAOV,OAAP;AACD;;;;;;kBAtDkBT,O","file":"vcsroot.js","sourcesContent":["import Client from './client';\n\nexport default class VcsRoot extends Client {\n\n  /**\n   * @constructor\n   */\n  constructor (baseUrl, name, password) {\n    super(baseUrl, name, password);\n    this._baseUrl = `${this._baseUrl}/vcs-roots/`;\n  }\n\n  /**\n   * Get the vcs root that matches the name provided\n   * @param {string} name - the name of the vcs root to look for\n   */\n  async get (name) {\n    return await super._get({ uri: `${this._baseUrl}name:${name}` });\n  }\n\n  /**\n   * Create the request to send to teamcity\n   * @param {string} options.name - (Required) the name of the Vcs Root to create\n   * @param {string} options.projectName - the name of the project the VcsRoot will belong to\n   * @param {string} options.projectId - the name of the project the VcsRoot will belong to\n   * @param {string} options.url - (Required) the url to the repository to use for the vcs root\n   * @param {string} options.branch - the main branch to use for the repository\n   * @param {string} options.vcsType - (Required) the type of vcs connector to use [jetbrains.get|perforce|svn|tfs]\n   */\n  async create (options) {\n    return await super._post({ uri: this._baseUrl }, this._createRequestJson(options));\n  }\n\n  async delete (name) {\n    return await super._delete({ uri: `${this._baseUrl}name:${name}` });\n  }\n\n  _createRequestJson (args) {\n    var request = {\n      name: args.name,\n      projectLocator: args.projectName\n                      ? `name:${args.projectName}`\n                      : `id:${args.projectId}`,\n      properties: {\n        property: [\n          { name: 'url', value: args.url }\n        ]\n      },\n      vcsName: args.vcsType\n    };\n\n    if (args.branch) {\n      request.properties.property.push({ name: 'branch', value: args.branch });\n    }\n\n    return request;\n  }\n}\n"]}